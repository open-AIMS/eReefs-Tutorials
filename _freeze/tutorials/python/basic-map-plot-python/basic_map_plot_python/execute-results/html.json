{
  "hash": "4bf8837bbbb90f2fe6f5aebdf3027b6f",
  "result": {
    "markdown": "---\ntitle: \"Plot eReefs map data {{< fa brands python >}} Python\"\n---\n\n## Load the required Python libraries\n\nFirst of all, load the necessary libraries.\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nfrom netCDF4 import Dataset, num2date\nimport matplotlib.pyplot as plt\nimport cartopy\nimport cartopy.crs as ccrs\nimport os\ncartopy.config['data_dir'] = os.getenv('CARTOPY_DIR', cartopy.config.get('data_dir'))\n```\n:::\n\n\n## Define which data to be plotted.\n\nIn this section we define which data we want to read and plot.\n\n* **inputFile** - The netCDF input file. This can either be a downloaded file (see [How to manually download AIMS eReefs data](https://ereefs.aims.gov.au/ereefs-aims/help/how-to-manually-download-aims-ereefs-data)) or a OPeNDAP URL from the AIMS THREDDS server. For this tutorial we are using the OPeNDAP URL for the file `EREEFS_AIMS-CSIRO_gbr4_v2_hydro_daily-monthly-2010-09.nc`.\n\n* **selectedVariable** - The name of the variable in the netCDF file.\n\n* **selectedTimeIndex** The time slice in the netCDF file. Note the index starts with 0. For example, in the netCDF file \"EREEFS_AIMS-CSIRO_gbr4_v2_hydro_daily-monthly-2010-09.nc\" the time steps are \"days\". This means if you select selectedTimeIndex=1 it refers to the second day in this file, which is 02/09/2010.\nselectedDepthIndex The depth slice in the netCDF file. Note the index starts with 0. See the following table for a mapping of index to value:\n\n| Index (k) | Hydrodynamic 1km model | Hydrodynamic and BioGeoChemical 4km model |\n| --------- | ---------------------- | ----------------------------------------- |\n| 0         | -140.00 m              | -145.00 m                                 |\n| 1         | -120.00 m              | -120.00 m                                 |\n| 2         | -103.00 m              | -103.00 m                                 |\n| 3         | -88.00 m               | -88.00 m                                  |\n| 4         | -73.00 m               | -73.00 m                                  |\n| 5         | -60.00 m               | -60.00 m                                  |\n| 6         | -49.00 m               | -49.00 m                                  |\n| 7         | -39.50 m               | -39.50 m                                  |\n| 8         | -31.00 m               | -31.00 m                                  |\n| 9         | -24.00 m               | -23.75 m                                  |\n| 10        | -18.00 m               | -17.75 m                                  |\n| 11        | -13.00 m               | -12.75 m                                  |\n| 12        | -9.00 m                | -8.80 m                                   |\n| 13        | -5.25 m                | -5.55 m                                   |\n| 14        | -2.35 m                | -3.00 m                                   |\n| 15        | -0.50 m                | -1.50 m                                   |\n| 16        | n/a                    | -0.50 m                                   |\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\n# OPeNDAP URL to file \"EREEFS_AIMS-CSIRO_gbr4_v2_hydro_daily-monthly-2010-09.nc\". Hydrodynamic 4km model, daily data for the month September 2010\ninputFile = \"http://thredds.ereefs.aims.gov.au/thredds/dodsC/s3://aims-ereefs-public-prod/derived/ncaggregate/ereefs/gbr4_v2/daily-monthly/EREEFS_AIMS-CSIRO_gbr4_v2_hydro_daily-monthly-2010-09.nc\"\ninputFile\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```\n'http://thredds.ereefs.aims.gov.au/thredds/dodsC/s3://aims-ereefs-public-prod/derived/ncaggregate/ereefs/gbr4_v2/daily-monthly/EREEFS_AIMS-CSIRO_gbr4_v2_hydro_daily-monthly-2010-09.nc'\n```\n:::\n:::\n\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\n# The \"temperature\" variable\nselectedVariable = \"temp\"\nselectedVariable\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```\n'temp'\n```\n:::\n:::\n\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\n# 2nd of September 2010. Note the index starts with 0\nselectedTimeIndex = 1\nselectedTimeIndex\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```\n1\n```\n:::\n:::\n\n\n::: {.cell execution_count=5}\n``` {.python .cell-code}\n# -1.50 m depth. Note the index starts with 0\nselectedDepthIndex = 15\nselectedDepthIndex\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n```\n15\n```\n:::\n:::\n\n\n## Read in the netCDF file contents\n\nRead in the netCDF file contents and store the latitude, longitude and the variable data for the selected time and depth slice.\n\n::: {.cell execution_count=6}\n``` {.python .cell-code}\nnc_data = Dataset(inputFile, 'r')\nnc_data.title\n```\n\n::: {.cell-output .cell-output-display execution_count=6}\n```\n'eReefs AIMS-CSIRO GBR4 Hydrodynamic v2 daily aggregation'\n```\n:::\n:::\n\n\n::: {.cell execution_count=7}\n``` {.python .cell-code}\nlons = nc_data.variables['longitude'][:]\nprint(lons[0:5]) # look at the first few entries in the longitude vector\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[142.168788 142.198788 142.228788 142.258788 142.288788]\n```\n:::\n:::\n\n\n::: {.cell execution_count=8}\n``` {.python .cell-code}\nlats = nc_data.variables['latitude'][:]\nprint(lats[0:5]) # look at the first few entries in the latitude vector\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[-28.696022 -28.666022 -28.636022 -28.606022 -28.576022]\n```\n:::\n:::\n\n\n::: {.cell execution_count=9}\n``` {.python .cell-code}\nvariableData = nc_data.variables[selectedVariable][selectedTimeIndex, selectedDepthIndex, :, :]\nprint(variableData[0:5]) # look at the first few entries in the variable data\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[[      nan       nan       nan ...       nan       nan       nan]\n [      nan       nan       nan ... 19.706053 19.704573 19.697897]\n [      nan       nan       nan ... 19.70424  19.70451  19.699736]\n [      nan       nan       nan ... 19.700645 19.705711 19.70135 ]\n [      nan       nan       nan ... 19.69414  19.70423  19.703842]]\n```\n:::\n:::\n\n\n## Plotting\nFinally, plot the data.\n\n::: {.cell execution_count=10}\n``` {.python .cell-code}\nplt.figure(figsize=(12, 8), dpi=80, facecolor='w', edgecolor='k')\nax = plt.axes(projection=ccrs.PlateCarree())\nax.set_extent([135, 165, -6.5, -29.5], ccrs.PlateCarree())\n\nplt.contourf(lons, lats, variableData, 30, transform=ccrs.PlateCarree())\nax.coastlines()\n\nplt.show()\n```\n\n::: {.cell-output .cell-output-display}\n![](basic_map_plot_python_files/figure-html/cell-11-output-1.png){}\n:::\n:::\n\n\n",
    "supporting": [
      "basic_map_plot_python_files\\figure-html"
    ],
    "filters": [],
    "includes": {}
  }
}